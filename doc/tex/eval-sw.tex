
\subsection{Software Evaluation}
\label{sec:eval:sw}

To evaluate the software performance, we implemented AES 128, and
measure the static code size, instruction execution counts and cycle
counts of the Key Schedule, Encrypt and Decrypt functions.
We also separate generation of the KeySchedule for Encrypt and Decrypt.

\REFTAB{tab:eval:sw:size} shows the static code size for each
function.
We see that... ({\bf TODO}).

\REFTAB{tab:eval:sw:perf} gives cycle and instruction counts for each
variant.
Each implementation uses word-aligned state, meaning the input blocks
can be loaded with $4$ load-word instructions on $32$-bit host cores,
or $2$ load-double instructions on the $64$-bit host cores.

\begin{table}
\centering
\begin{tabular}{l|c|c|c|c|c}
Variant &
KeySchedule Enc  &
KeySchedule Dec  &
Encrypt Block    &
Decrypt Block    &
.data   \\ \hline
%Byte   & 312   &  -    &       &       & 522   \\
T-Table  & 154   &  174  & 804   & 804   & 5120  \\
V1      & 68    &  -    & 424   & 424   & 10    \\
V2      & 68    &  62*  & 234   & 238   & 10    \\
V3      & 86    &  64   & 290   & 290   & 10    \\
V4      & 168   &  100  & 268   & 268   &  0    \\
V5      & 82+208&  -    & 266   & 278   & 10    \\
\end{tabular}
\caption{
Static code size metrics for each variant, measured in bytes.
These are measured targeting the {\tt rv32imc} base ISA for all variants,
except for V4, which targets {\tt rv64imc}.
}
\label{tab:eval:sw:size}
\end{table}


%
% Commented out this table because in the real world, you'd make sure that
% your state is well aligned!
%
% \begin{table}[pt]
% \centering
% \begin{tabular}{l|cc|cc|cc|cc}
% & \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}KeyExpand\\ Encrypt\end{tabular}} 
% & \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}KeyExpand\\ Decrypt\end{tabular}}
% & \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}AES 128\\ Encrypt\end{tabular}}
% & \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}AES 128\\ Decrypt\end{tabular}} \\
% Variant     &  iret & cycles & iret & cycles & iret & cycles & iret & cycles \\ \hline
%  Byte       &  926  & 3887   & 926  & 3886   & 4228 & 7061   & 7652 & 11587 \\
%  T-Table     &  481  & 591    & 1762 & 2238   & 1013 & 1144   & 1013 & 1118  \\
% V1 (Latency)&  249  & 369    & 255  & 386    & 593  & 698    & 593  & 707   \\
% V2 (Latency)&  249  & 382    & 386  & 694    & 296  & 404    & 297  & 404   \\
% V3          &  269  & 388    & 719  & 1145   & 321  & 413    & 321  & 408   \\
% V5 (Latency)&  383  & 524    & 389  & 541    & 308  & 408    & 308  & 409   \\
% V1 (Size)   &  249  & 409    & 255  & 426    & 593  & 858    & 593  & 875   \\
% V2 (Size)   &  249  & 412    & 386  & 832    & 296  & 641    & 297  & 641   \\
% V5 (Size)   &  383  & 554    & 389  & 571    & 308  & 660    & 308  & 650   \\
% \end{tabular}
% \caption{
% Performance metrics for byte aligned state.
% }
% \label{tab:eval:sw:perf:byte}
% \end{table}

\begin{table}
\centering
\begin{tabular}{l|cc|cc|cc|cc}
& \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}AES 128 Block\\ Encrypt\end{tabular}}
& \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}AES 128 Block\\ Decrypt\end{tabular}}
& \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}KeySchedule\\ Encrypt\end{tabular}} 
& \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}KeySchedule\\ Decrypt\end{tabular}}
\\
Variant     &  iret & cycles & iret & cycles & iret & cycles & iret & cycles \\ \hline
%Byte       & 4228 & 7061 & 7652 & 11587& 926 & 3887 & 926 & 3886   \\
 T-Table     & 953  & 1078 & 953  & 1058 & 445 & 555 & 1726 & 2202    \\
V1 (Latency)& 533  & 635  & 533  & 647  & 213 & 333 & 219  & 350     \\
V2 (Latency)& 236  & 343  & 237  & 343  & 213 & 344 & 350  & 656     \\
V5 (Latency)& 248  & 346  & 248  & 349  & 347 & 489 & 353  & 506     \\
V1 (Size)   & 533  & 795  & 533  & 815  & 213 & 373 & 219  & 390     \\
V2 (Size)   & 236  & 580  & 237  & 580  & 213 & 374 & 350  & 794     \\
V3          & 261  & 351  & 261  & 346  & 233 & 352 & 683  & 1109    \\
V5 (Size)   & 248  & 598  & 248  & 590  & 347 & 519 & 353  & 536  
\end{tabular}
\caption{
Performance results for the \CORE{2} core.
Note the absence of variant 4, as it is designed for 64-bit targets only.
}
\label{tab:eval:sw:perf:scarv}
\end{table}

\begin{table}
\centering
\begin{tabular}{l|cc|cc|cc|cc}
& \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}AES 128 Block\\ Encrypt\end{tabular}}
& \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}AES 128 Block\\ Decrypt\end{tabular}}
& \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}KeySchedule\\ Encrypt\end{tabular}} 
& \multicolumn{2}{c}{\begin{tabular}[c]{@{}c@{}}KeySchedule\\ Decrypt\end{tabular}}
\\
Variant     &  iret & cycles & iret & cycles & iret & cycles & iret & cycles\\
\hline
%Byte       &       &        &      &        &      &        &      &      \\
T-Table     & 948   &  1143  & 949  &  1025  & 444  & 478    & 1726 & 1977 \\
V1 (Latency)& 528   &  685   & 529  &  680   & 212  & 341    & 214  & 290  \\
V2 (Latency)& 231   &  359   & 233  &  368   & 212  & 315    & 350  & 508  \\
V5 (Latency)& 243   &  414   & 244  &  319   & 346  & 427    & 348  & 424  \\
V1 (Size)   & 528   &  804   & 529  &  744   & 212  & 357    & 214  & 335  \\
V2 (Size)   & 231   &  511   & 233  &  520   & 212  & 345    & 350  & 646  \\
V3          & 253   &  895   & 254  &  873   & 233  & 470    & 674  & 2425 \\
V4          & TODO  &        &      &        &      &        &      &      \\
V5 (Size)   & 243   &  585   & 244  &  543   & 346  & 504    & 348  & 454  \\
\end{tabular}
\caption{
Performance results for the \CORE{1} core.
}
\label{tab:eval:sw:perf:scarv}
\end{table}

% ------------------------------------------------------------

We can see from the tables that ({\bf TODO}).

% =============================================================================
